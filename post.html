<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Post</title>
    <link rel="stylesheet" href="base.css">
    <link rel="stylesheet" href="blog.css">
</head>
<body>
    <header>
        <div class="logo">DUSH</div>
        <div class="nav">
            <a href="index.html">PORTFOLIO</a>
            <a href="blog.html" class="active">BLOG</a>
            <a href="dashboard.html">DASHBOARD</a>
        </div>
    </header>
    <main>
        <section class="post-detail section" id="postDetailContainer">
            <!-- Post content will be rendered here -->
        </section>
    </main>
    <script>
    // Utility to get query param
    function getQueryParam(name) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(name);
    }
    async function fetchAndRenderPost() {
        const postId = getQueryParam('id');
        if (!postId) {
            document.getElementById('postDetailContainer').innerHTML = '<div>Post not found.</div>';
            return;
        }
        try {
            const response = await fetch(`http://localhost:3000/api/posts/${postId}`);
            if (!response.ok) throw new Error('Post not found');
            const post = await response.json();
            document.getElementById('postDetailContainer').innerHTML = `
                <h1 class="post-title">${post.title}</h1>
                <div class="post-meta">
                    <span>By ${post.author?.username || 'Unknown'}</span> |
                    <span>${new Date(post.publishedAt || post.createdAt).toLocaleDateString()}</span>
                </div>
                <div class="post-image">
                    <img src="${post.imageUrl || './images/blogone.jpeg'}" alt="Post image">
                </div>
                <div class="post-content">${post.content}</div>
            `;
        } catch (error) {
            document.getElementById('postDetailContainer').innerHTML = '<div>Error loading post.</div>';
        }
    }
    document.addEventListener('DOMContentLoaded', fetchAndRenderPost);
    </script>
</body>
</html> 